<html>
<!-- Copyright 2015 Pushkar Piggott -->
<a name='top'>
<center><h1>Files and Syntax</h1></center>
<h2>Sections</h2>
<dl>
<dt><a href='#cfg'>Chord mapping files</a>
<dt><a href='#keys'>Keystroke files</a>
<dt><a href='#chord'>Chord text format</a>
<dt><a href='#format'>Keystroke text format</a>
<dt><a href='#other'>Other text files</a>
</dl>

<a name='cfg'>
<h2>Chord mapping files (<tt>.cfg</tt>)</h2>
Chord mapping files come in two flavours, <tt>cfg</tt> (binary) and <tt>cfg.txt</tt> (text). 
The Twiddler can only read <tt>cfg</tt>s, and you and I can only read <tt>cfg.txt</tt>s. 
Happily, Twidlit can read and write both.
<br><br>
I get confused trying to manage binary files that have to be given the same name (<tt>twiddler.cfg</tt>) when in use, 
so I keep all my chord files as text and only save them as binary when loading the Twiddler. 
<br><br>
The <em>Files of type</em> selector below the file name box on the <em>Open</em> and <em>Save As</em> dialogs allows you to choose the type of file you want. 
<br><br>
<tt>cfg.txt</tt> files contain chord mappings as text. 
Each line contains a <a href='#chord'>chord</a>, an equals and a list of the <a href='#keys'>keystrokes</a> generated by that chord. 
Here's how it might look:
<br><br>
<tt>
# the mappings for e<br>
0    '||| = e<br>
0    '||, = E    # don't use the shift key<br>
0    '||' = &lt;Ctrl>e&lt;/Ctrl><br>
</tt>

<a name='keys'>
<h2>Keystroke files (<tt>.keys</tt>)</h2>
The menu item <a href='ref.html#keys'><tt>Tutor > Keystrokes</tt></a> allows you to select a file of <a href='#keys'>keystrokes</a> to chord. 
<br><br>
To make a keystroke appear more frequently, add it more than once.
A line of keystrokes preceded by a number followed by ':' is added that many times. 
For example:
<br><br>
<tt>
4:&lt;Space>&lt;Tab><br>
etoin<br>
</tt>

<a name='chord'>
<h2>Chord text format</h2>
Chords are represented by a thumb-key sequence and a finger sequence. 
The thumb-key sequence consists of <tt>0</tt> or the initials of the thumb-keys pressed, 
for example, <tt>CS</tt>.
<br><br>
The finger sequence has a character for each of the four fingers. 
It starts with the index finger, so rotate your wrist so that your index finger is to the left and imagine you are holding the Twiddler. 
<p>
<b><tt>|</tt></b> (pipe) is an inactive finger,<br>
<b><tt>-</tt></b> (hyphen) is the middle button,<br> 
<b><tt>'</tt></b> (apostrophe) is the button above it and<br>
<b><tt>,</tt></b> (comma) is the button below.<br> 
<br>
A whole chord might look like:
<br>
<b><tt>S    '--|</tt></b>

<a name='format'>
<h2>Keystroke text formats</h2>
Twidlit represents characters (e.g. lower case f) and keystrokes (e.g. Shift and F1 held down together). 
<br><br>
The following are the options for writing Keystrokes to text files. 
Only STD, TAG and HEX are suitable for <tt>cfg.txt</tt> files because they encode both characters and non-character keystrokes (e.g. <tt>&lt;F1></tt>). 
Twidlit reads them all except TXT. 
<dl>
<dt><b>STD</b>
<dd>Text is represented as escaped characters, 
White space and non-character keystrokes are tagged. 
For example, <tt>\# This&lt;Tab>is&lt;Space>it&lt;PageDown></tt>
<dt><b>TAG</b>
<dd>All tags, for example, 
<tt>&lt;Ctrl>&lt;PageUp> &lt;/Ctrl>&lt;Shift>&lt;KeyT>&lt;/Shift></tt>
<dt><b>ESC</b>
<dd>Text can include escaped characters. 
All characters represent themselves (i.e. the escape character will simply be stripped off) except for:
<table style="width:100%">
  <tr><td>Back space (0x08)</td><td><b>\b</b></td></tr>
  <tr><td>Tab (0x09)</td><td><b>\t</b></td></tr>
  <tr><td>New line (0x0a)</td><td><b>\n</b></td></tr>
  <tr><td>Carriage return (0x0d)</td><td><b>\r</b></td></tr>
  <tr><td>Escape (0x1b)</td><td><b>\e</b></td></tr>
  <tr><td>Space (0x20)</td><td><b>\s</b></td></tr>
  <tr><td>Back slash (otherwise the start of an escape sequence)</td><td><b>\\</b></td></tr>
  <tr><td>Hash (otherwise the start of a comment)</td><td><b>\#</b></td></tr>
  <tr><td>Less than (otherwise the start of a tag)</td><td><b>\&lt;</b></td></tr>
  <tr><td>Character as hexadecimal (<em>nn</em> is two hex digits)</td><td><b>\x<em>nn</em></b></td></tr>
</table>
For example <tt>\A\tis\sthe\ssme\sas\sA.</tt>
<dt><b>HEX</b>
<dd>Keystrokes are represented by hexadecimal keycode values.
<table style="width:100%">
  <tr><td>Keystroke as hexadecimal (<em>nnnn</em> is four hex digits)</td><td><b>\k<em>nnnn</em></b></td></tr>
</table>
For example <tt>\k002c\k022f\k0028</tt>.
<dt><b>TXT</b>
<dd>Characters represent themselves, for example, <tt>This is text.</tt>
</dl>

<a name='other'>
<h2>Other text files</h2>
<h3><tt>TwidlitKeyValues.txt</tt>, <tt>TwidlitKeyNames.txt</tt> and <tt>TwidlitKeyEvents.txt</tt></h3>
Twidlit is set up to use the US keyboard mapping. 
If yours is different you can probably find it in <a href="http://www.w3.org/TR/DOM-Level-3-Events-code">www.w3.org/TR/DOM-Level-3-Events-code</a> and change these files. 
<a name='unprint.txt'>
<h3><tt>TwidlitUnprintables.txt</tt></h3>
Some ASCII values are unprintable (<em>backspace</em>, for example). 
When every keystroke needs to be visible the values in this file are treated specially.
<a name='dup.txt'>
<h3><tt>TwidlitDuplicates.txt</tt></h3>
Some keys are duplicates (<em>Numpad4</em>, for example). 
You can configure your twiddler to generate them but they never appear in text.
<a name='lost.txt'>
<h3><tt>TwidlitLost.txt</tt></h3>
Some keystrokes never reach an application (<em>&lt;Alt>&lt;Tab>&lt/Alt></em>, for example). 
They vary with OS.
</html>
